<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:custom="http://xmlns.jcp.org/jsf/composite/component"
      xmlns:error="http://xmlns.jcp.org/jsf/composite/component/error">
<h:head>
    <h:outputStylesheet name="system/style.css" library="css"/>
    <h:outputStylesheet name="primeflex/3.3.1/primeflex.min.css" library="webjars"/>
    <h:outputStylesheet name="/font-awesome/6.4.2/css/all.min-jsf.css" library="webjars"/>
    <h:outputStylesheet name="/font-awesome/6.4.2/css/v4-shims.min-jsf.css" library="webjars"/>
    <h:outputScript name="linker/script.js" library="js"/>
    <h:outputScript name="system/mainScript.js" library="js"/>
</h:head>
<h:body>
    <error:expired/>
    <error:other/>

    <h:outputStylesheet name="linker/style.css" library="css"/>

    <p:growl id="growl" showDetail="true" />

    <p:ajaxStatus onstart="PF('statusDialog').show();" oncomplete="PF('statusDialog').hide();" delay="350"/>

    <h:form>
        <p:remoteCommand autoRun="true" onstart="iframeStatus([{name:'inIframe', value:inIframe()}]);" />
        <p:remoteCommand name="iframeStatus" action="#{linkerController.changeInIframe()}"/>

        <p:remoteCommand name="createMaskWrapper" action="#{linkerController.createMask()}" update="growl" />
        <p:remoteCommand name="updateParamTrees" action="#{linkerController.updateParamTreesWrapper()}"
                         oncomplete="handleMsg(xhr, status, args);" />
        <p:remoteCommand name="removeNoLinkObject" action="#{linkerController.removeObjectForLink}"
                         update="linkerForm:linkerTabView:selectObjects
                                linkerForm:linkerTabView:linkBtnForNoLink"/>
        <p:remoteCommand name="schemaLinkDialogClose" action="#{linkerController.schemaLinkDialogClose()}"
                         oncomplete="PF('schemaLinkDialogWidget').hide();"/>
        <p:remoteCommand name="filterTree" action="#{linkerController.customFilter()}"/>
    </h:form>

    <h:form style="padding-top: 0.1rem; padding-left: 0.1rem; padding-right: 0.1rem;">
        <div style="padding-left: 0.1rem; padding-right: 0.1rem;">
            <p:breadCrumb style="padding: 3px;">
                <p:menuitem value="home"/>
                <p:menuitem value="Администрирование"/>
                <p:menuitem value="Системные настройки"/>
                <p:menuitem value="Линковщик"/>
            </p:breadCrumb>
        </div>
    </h:form>

    <h:form id="linkerForm" style="height: calc(100% - 31px);">
        <p:tabView id="linkerTabView" style="padding: 0.1rem; height: 100%;" orientation="bottom" styleClass="tc-panel tc-nav">

            <p:ajax event="tabChange" listener="#{linkerController.onTabChange}"
                    onstart="PF('statusDialog').show();"
                    oncomplete="PF('statusDialog').hide();"
                    update="linkerForm:linkerTabView:objectTabView:recountBtn
                            linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                            linkerForm:linkerTabView:objectTabView:linkTemplate
                            linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                            linkerForm:linkerTabView:objectTabView:linkBtnGroup
                            linkerForm:linkerTabView:objectTabView:calcParamDataPanelHeader"
                    global="false"/>

            <p:tab title="Нелинкованные объекты">
                <p:panel id="noLinkedDataPanel" header="Нелинкованные объекты" styleClass="tc-panel" style="padding: 0.1rem 0.1rem 0;">
                    <div style="display: flex; height: 100%; padding: 3px;">
                        <div style="height: 100%; margin-right: 3px; width: 366px;">
                            <custom:navigateComponent id="navigate" bean="#{linkerController.navigationBean}"
                                                      selectedObject="#{linkerController.selectedNavigateObject}"
                                                      selectedObjectType="#{linkerController.selectedNavigateObjectType}"
                                                      updateOnReload="linkerForm:linkerTabView:linkBtnForNoLink">
                                <p:ajax event="select" update="linkerForm:linkerTabView:linkBtnForNoLink"/>

                                <f:facet name="customButtons">
                                    <p:commandLink title="Создать фиктивный узел учета"
                                                   rendered="#{linkerController.renderNavigateCustomBtn}"
                                                   disabled="#{linkerController.disabledNavigateCustomBtn}"
                                                   process="@this" global="false"
                                                   action="#{linkerController.createFictitiousYY()}"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   onstart="PF('statusDialog').show();"
                                                   oncomplete="PF('statusDialog').hide(); PF('opcObjectsForNoLinkTableWidget').filter();"
                                                   update="growl linkerForm:linkerTabView:paramBtns
                                                            linkerForm:linkerTabView:selectObjects
                                                            linkerForm:linkerTabView:linkBtnForNoLink">
                                        <h:outputText styleClass="ui-icon pi pi-book"/>
                                    </p:commandLink>
                                </f:facet>
                            </custom:navigateComponent>
                        </div>
                        <div style="width: calc(100% - 369px);">
                            <p:panel header="Объекты" styleClass="tc-panel tc-panel-header-small">
                                <h:panelGroup id="selectObjects" styleClass="tc-custom-scroll-small" layout="block" style="height: 40px; overflow: auto; padding-top: 8px;">
                                    <ul style="margin: 0; padding: 0;">
                                        <c:forEach items="#{linkerController.objectsForLink}" var="item">
                                            <li class="tc-add-item-info">
                                                <span class="pi pi-times tc-add-item-info-icon" onclick="removeNoLinkObject([{name:'id', value:'#{item.id}'}]);"/>
                                                <h:outputText class="tc-add-item-info-text" value="#{item.opcObject.name}"/>
                                            </li>
                                        </c:forEach>
                                    </ul>
                                    <h:outputText rendered="#{empty linkerController.objectsForLink}" value="Объекты, выбранные для линковки..."
                                                  style="display: block; color: #8e8e8e; margin-top: 3px; margin-left: 3px;"/>
                                </h:panelGroup>
                                <div style="height: calc(100% - 46px); padding: 3px 0 3px 3px;">
                                    <p:dataTable id="opcObjectsForNoLinkTable" value="#{linkerController.opcObjectsForNoLinkData}" var="opcObjectForLink"
                                                 rowKey="#{opcObjectForLink.id}" widgetVar="opcObjectsForNoLinkTableWidget"
                                                 selection="#{linkerController.selectedOpcObjectsForNoLink}" selectionMode="single"
                                                 scrollable="true" scrollHeight="100%"
                                                 lazy="true" virtualScroll="true" scrollRows="100"
                                                 emptyMessage="#{global['table.empty.value']}">

                                        <p:ajax event="rowSelect" update="linkerForm:linkerTabView:paramBtns"/>
                                        <p:ajax event="rowDblselect" listener="#{linkerController.onSelectObjectForLink}"
                                                update="linkerForm:linkerTabView:selectObjects
                                                        linkerForm:linkerTabView:linkBtnForNoLink"/>
                                        <p:ajax event="contextMenu" update="linkerForm:linkerTabView:paramBtns"/>

                                        <p:column headerText="Объекты автоматизации"
                                                  filterBy="#{opcObjectForLink.opcObject.name}" filterMatchMode="contains">
                                            <h:outputText value="#{opcObjectForLink.opcObject.name}"/>

                                            <f:facet name="filter">
                                                <p:inputText placeholder="Поиск..." style="width: 100%;"
                                                             onkeyup="PF('opcObjectsForNoLinkTableWidget').filter();"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Сервер" width="200"
                                                  filterBy="#{opcObjectForLink.serverName}" filterMatchMode="contains">
                                            <h:outputText value="#{opcObjectForLink.serverName}"/>

                                            <f:facet name="filter">
                                                <p:inputText placeholder="Поиск..." style="width: 100%;"
                                                             onkeyup="PF('opcObjectsForNoLinkTableWidget').filter();"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Кол-во тегов" width="120" styleClass="center">
                                            <h:outputText id="paramCount" value="#{opcObjectForLink.paramCount}"/>
                                        </p:column>
                                    </p:dataTable>

                                    <p:contextMenu for="@previous" style="width: 220px;">
                                        <p:menuitem value="Показать параметры" process="@this"
                                                    action="#{linkerController.loadOpcObjectParams()}"
                                                    oncomplete="PF('showOpcObjectParamsDialogWidget').show(); PF('showOpcObjectParamsTableWidget').filter();"
                                                    update="showOpcObjectParamsDialogHeader"
                                                    icon="pi pi-list"/>
                                        <p:menuitem value="Запросить параметры" process="@this" global="false"
                                                    action="#{linkerController.requestOpcParamForNoLink()}"
                                                    onstart="PF('statusDialog').show();"
                                                    oncomplete="PF('statusDialog').hide(); PF('opcObjectsForNoLinkTableWidget').filter();"
                                                    update="growl linkerForm:linkerTabView:paramBtns
                                                            linkerForm:linkerTabView:selectObjects
                                                            linkerForm:linkerTabView:linkBtnForNoLink"
                                                    icon="pi pi-cloud-download"/>
                                        <p:menuitem value="Очистить параметры" process="@this" global="false"
                                                    action="#{linkerController.removeOpcObjectParams()}"
                                                    onstart="PF('statusDialog').show();"
                                                    oncomplete="PF('statusDialog').hide(); PF('opcObjectsForNoLinkTableWidget').filter();"
                                                    update="growl linkerForm:linkerTabView:paramBtns
                                                            linkerForm:linkerTabView:selectObjects
                                                            linkerForm:linkerTabView:linkBtnForNoLink"
                                                    icon="fa-solid fa-broom w-16"/>
                                        <p:divider/>
                                        <p:menuitem value="Удалить объект" process="@this" global="false"
                                                    action="#{linkerController.removeOpcObject()}"
                                                    onstart="PF('statusDialog').show();"
                                                    oncomplete="PF('statusDialog').hide(); PF('opcObjectsForNoLinkTableWidget').filter();"
                                                    update="growl linkerForm:linkerTabView:paramBtns
                                                            linkerForm:linkerTabView:selectObjects
                                                            linkerForm:linkerTabView:linkBtnForNoLink"
                                                    icon="pi pi-trash"/>
                                    </p:contextMenu>
                                </div>

                                <f:facet name="actions">
                                    <h:panelGroup id="paramBtns" layout="block" style="display: flex;">
                                        <p:commandLink title="Показать параметры" disabled="#{linkerController.disabledParamButtonsForNoLink}"
                                                       process="@this"
                                                       styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                       action="#{linkerController.loadOpcObjectParams()}"
                                                       oncomplete="PF('showOpcObjectParamsDialogWidget').show(); PF('showOpcObjectParamsTableWidget').filter();"
                                                       update="showOpcObjectParamsDialogHeader">
                                            <h:outputText styleClass="ui-icon pi pi-list"/>
                                        </p:commandLink>
                                        <p:commandLink title="Запросить параметры" disabled="#{linkerController.disabledParamButtonsForNoLink}"
                                                       action="#{linkerController.requestOpcParamForNoLink()}"
                                                       process="@this" global="false"
                                                       styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                       onstart="PF('statusDialog').show();"
                                                       oncomplete="PF('statusDialog').hide(); PF('opcObjectsForNoLinkTableWidget').filter();"
                                                       update="growl linkerForm:linkerTabView:paramBtns
                                                                linkerForm:linkerTabView:selectObjects
                                                                linkerForm:linkerTabView:linkBtnForNoLink">
                                            <h:outputText styleClass="ui-icon pi pi-cloud-download"/>
                                        </p:commandLink>
                                        <p:commandLink title="Очистить параметры" disabled="#{linkerController.disabledParamButtonsForNoLink}"
                                                       action="#{linkerController.removeOpcObjectParams()}"
                                                       process="@this" global="false"
                                                       styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                       onstart="PF('statusDialog').show();"
                                                       oncomplete="PF('statusDialog').hide(); PF('opcObjectsForNoLinkTableWidget').filter();"
                                                       update="growl linkerForm:linkerTabView:paramBtns
                                                                linkerForm:linkerTabView:selectObjects
                                                                linkerForm:linkerTabView:linkBtnForNoLink">
                                            <h:outputText styleClass="ui-icon fa-solid fa-broom" style="vertical-align: 0.2em;"/>
                                        </p:commandLink>
                                        <p:divider layout="vertical" style="padding: 0.6rem 0; margin: 0 0.5rem;"/>
                                        <p:commandLink title="Удалить объект" disabled="#{linkerController.disabledParamButtonsForNoLink}"
                                                       action="#{linkerController.removeOpcObject()}"
                                                       process="@this" global="false"
                                                       styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                       onstart="PF('statusDialog').show();"
                                                       oncomplete="PF('statusDialog').hide(); PF('opcObjectsForNoLinkTableWidget').filter();"
                                                       update="growl linkerForm:linkerTabView:paramBtns
                                                                linkerForm:linkerTabView:selectObjects
                                                                linkerForm:linkerTabView:linkBtnForNoLink">
                                            <h:outputText styleClass="ui-icon pi pi-trash" style="vertical-align: 0.05em;"/>
                                        </p:commandLink>
                                    </h:panelGroup>
                                </f:facet>
                            </p:panel>
                        </div>
                    </div>

                    <f:facet name="actions">
                        <div style="display: flex;">
                            <p:commandLink id="linkBtnForNoLink" title="Слинковать объект" disabled="#{linkerController.disabledLinkBtnForNoLink}"
                                           action="#{linkerController.linkNoLinkedObjects()}"
                                           process="@this" global="false"
                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                           onstart="PF('statusDialog').show();"
                                           oncomplete="PF('statusDialog').hide();"
                                           update="growl">
                                <h:outputText styleClass="ui-icon fa-solid fa-link" style="font-size: .9rem; vertical-align: 1px;"/>
                            </p:commandLink>
                            <p:commandLink id="redirectBtn_0" title="Источники данных" process="@this"
                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                           onclick="changeStyle('redirectForm', 'right', '24px');
                                                    changeVisible('redirectForm', 'linkerForm:linkerTabView:redirectBtn_0');">
                                <h:outputText styleClass="ui-icon pi pi-sitemap -rotate-90"/>
                            </p:commandLink>
                        </div>
                    </f:facet>
                </p:panel>
            </p:tab>
            <p:tab title="Линкованные объекты">
                <p:tabView id="objectTabView" widgetVar="objectTabViewWidget"
                           style="padding: 0.1rem; height: calc(100% + 37px);" orientation="bottom" styleClass="tc-panel tc-nav-left">

                    <p:ajax event="tabChange" listener="#{linkerController.onTabChange}"
                            onstart="PF('statusDialog').show(); updateEmptyRow();"
                            oncomplete="PF('statusDialog').hide();"
                            update="linkerForm:linkerTabView:objectTabView:recountBtn
                                    linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                    linkerForm:linkerTabView:objectTabView:linkTemplate
                                    linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                    linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                    linkerForm:linkerTabView:objectTabView:linkedDataTable
                                    linkerForm:linkerTabView:objectTabView:calcParamDataPanelHeader
                                    linkerForm:linkerTabView:objectTabView:paramDataPanelHeader"
                            global="false"/>

                    <p:tab title="Объекты">
                        <p:panel id="linkedDataPanel" styleClass="tc-panel">
                            <f:facet name="header">
                                <h:outputText id="linkedDataPanelHeader"
                                              value="Линкованные объекты (#{linkerController.selectedObjectType.code})"/>
                            </f:facet>

                            <div style="height: calc(100% - 6px); padding: 3px 0 3px 3px;">
                                <p:dataTable id="linkedDataTable" value="#{linkerController.linkedData}" var="link"
                                             rowKey="#{link.id}" widgetVar="linkedDataTableWidget" rowIndexVar="rowIndex"
                                             selection="#{linkerController.selectedLinkedData}" selectionMode="single"
                                             scrollable="true" scrollHeight="100%"
                                             lazy="true" virtualScroll="true" scrollRows="100"
                                             emptyMessage="#{global['table.empty.value']}">

                                    <p:ajax event="virtualScroll" oncomplete="addOnDblClickEvents();"/>
                                    <p:ajax event="filter" oncomplete="updateEmptyRow(); addOnDblClickEvents();"/>
                                    <p:ajax event="rowSelect" listener="#{linkerController.onLinkedRowSelect}"
                                            oncomplete="PF('objectTabViewWidget').enable(1); PF('objectTabViewWidget').enable(2);"
                                            update="linkerForm:linkerTabView:objectTabView:recountBtn
                                                linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                                linkerForm:linkerTabView:objectTabView:linkTemplate
                                                linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                                linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                                recountForm:recountPanel"/>
                                    <p:ajax event="contextMenu" listener="#{linkerController.onLinkedRowSelect}"
                                            oncomplete="PF('objectTabViewWidget').enable(1); PF('objectTabViewWidget').enable(2);"
                                            update="linkerForm:linkerTabView:objectTabView:recountBtn
                                                linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                                linkerForm:linkerTabView:objectTabView:linkTemplate
                                                linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                                linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                                linkerForm:linkerTabView:objectTabView:contextMenu
                                                recountForm:recountPanel"/>

                                    <p:column headerText="Объекты системы" width="300" groupRow="true"
                                              filterBy="#{link.dbObject.name}" filterMatchMode="contains">
                                        <p:outputLabel id="systemObjectName" value="#{link.dbObject.name}"
                                                       onclick="PF('linkedDataTableWidget').selectRow(#{rowIndex}, false);"
                                                       ondblclick="PF('linkedDataTableWidget').selectRow(#{rowIndex}, false); PF('createMaskDialogWidget').show();"/>

                                        <f:facet name="filter">
                                            <p:inputText placeholder="Поиск..." style="width: 100%"
                                                         onkeyup="PF('linkedDataTableWidget').filter();"/>
                                        </f:facet>
                                    </p:column>
                                    <p:column headerText="Схема линковки" width="200">
                                        <h:outputText id="schemaName" value="#{link.schema.name}" title="#{link.schema.name}"/>
                                    </p:column>
                                    <p:column headerText="Объекты автоматизации" width="300"
                                              filterBy="#{link.opcObject.name}" filterMatchMode="contains">
                                        <h:outputText value="#{link.opcObject.name}"/>

                                        <f:facet name="filter">
                                            <p:inputText placeholder="Поиск..." style="width: 100%"
                                                         onkeyup="PF('linkedDataTableWidget').filter();"/>
                                        </f:facet>
                                    </p:column>
                                    <p:column headerText="Сервер" width="200"
                                              filterBy="#{link.serverName}" filterMatchMode="contains">
                                        <h:outputText value="#{link.serverName}"/>

                                        <f:facet name="filter">
                                            <p:inputText placeholder="Поиск..." style="width: 100%;"
                                                         onkeyup="PF('linkedDataTableWidget').filter();"/>
                                        </f:facet>
                                    </p:column>
                                    <p:column headerText="Подписан" width="70" styleClass="center"
                                              filterBy="#{link.subscribed}" filterMatchMode="exact">
                                        <p:selectBooleanCheckbox value="#{link.subscribed}">
                                            <p:ajax listener="#{linkerController.subscribe(link)}" update="@this growl"/>
                                        </p:selectBooleanCheckbox>

                                        <f:facet name="filter">
                                            <p:selectOneMenu title="Все" syncTooltip="true" onchange="PF('linkedDataTableWidget').filter();" style="width: 78px;">
                                                <f:selectItem itemLabel="Все" noSelectionOption="true" itemDescription="Все"/>
                                                <f:selectItem itemLabel="Подписанные" itemValue="#{true}" itemDescription="Подписанные"/>
                                                <f:selectItem itemLabel="Не подписанные" itemValue="#{false}" itemDescription="Не подписанные"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>

                                <p:contextMenu id="contextMenu" for="linkedDataTable" style="width: 296px;">
                                    <p:menuitem value="Долинковать"
                                                icon="fa-solid fa-link w-16"
                                                action="#{linkerController.loadOpcObjectsForLink()}"
                                                oncomplete="PF('addLinkDialogWidget').show(); PF('opcObjectsForLinkTableWidget').filter();"
                                                update="addLinkDialogHeader"/>
                                    <p:menuitem value="Разлинковать"
                                                icon="fa-solid fa-link-slash w-16"
                                                onstart="PF('statusDialog').show();"
                                                oncomplete="PF('statusDialog').hide(); PF('linkedDataTableWidget').filter();
                                                                    PF('objectTabViewWidget').disable(1); PF('objectTabViewWidget').disable(2);"
                                                update="linkerForm:linkerTabView:objectTabView:recountBtn
                                                        linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                                        linkerForm:linkerTabView:objectTabView:linkTemplate
                                                        linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                                        linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                                        recountForm:recountPanel growl"
                                                action="#{linkerController.removeLink}" global="false"/>
                                    <p:menuitem value="Разлинковать все"
                                                icon="fa-solid fa-explosion w-16"
                                                onstart="PF('statusDialog').show();"
                                                oncomplete="PF('statusDialog').hide(); PF('linkedDataTableWidget').filter();
                                                                    PF('objectTabViewWidget').disable(1); PF('objectTabViewWidget').disable(2);"
                                                update="linkerForm:linkerTabView:objectTabView:recountBtn
                                                        linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                                        linkerForm:linkerTabView:objectTabView:linkTemplate
                                                        linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                                        linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                                        recountForm:recountPanel growl"
                                                action="#{linkerController.removeAllLinks}" global="false"/>
                                    <p:divider/>
                                    <p:menuitem value="Задать название схеме линковки" icon="pi pi-book"
                                                onclick="PF('createMaskDialogWidget').show();"/>
                                    <p:divider rendered="#{linkerController.renderContextSubMenu and !linkerController.templateLinkNames.isEmpty()}"/>
                                    <p:submenu icon="fa-solid fa-file-circle-plus w-16" label="Добавить шаблон линковки"
                                               rendered="#{linkerController.renderContextSubMenu and !linkerController.templateLinkNames.isEmpty()}">
                                        <c:forEach items="#{linkerController.templateLinkNames}" var="linkName">
                                            <p:menuitem value="#{linkName}" action="#{linkerController.addLinkTemplate(linkName)}"
                                                        update="growl"/>
                                        </c:forEach>
                                    </p:submenu>
                                </p:contextMenu>
                            </div>

                            <f:facet name="actions">
                                <div style="display: flex;">
                                    <h:panelGroup id="linkBtnGroup">
                                        <h:outputText value="Линковка:" style="margin-right: 3px;"/>
                                        <p:commandLink id="removeAllLinkBtn" title="Разлинковать все" disabled="#{linkerController.disableLinksBtn}"
                                                       styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                       onstart="PF('statusDialog').show();"
                                                       oncomplete="PF('statusDialog').hide(); PF('linkedDataTableWidget').filter();
                                                                    PF('objectTabViewWidget').disable(1); PF('objectTabViewWidget').disable(2);"
                                                       update="linkerForm:linkerTabView:objectTabView:recountBtn
                                                                linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                                                linkerForm:linkerTabView:objectTabView:linkTemplate
                                                                linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                                                linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                                                recountForm:recountPanel growl"
                                                       action="#{linkerController.removeAllLinks}" global="false">
                                            <h:outputText styleClass="ui-icon fa-solid fa-explosion" style="font-size: .9rem; vertical-align: 1px;"/>
                                        </p:commandLink>
                                        <p:commandLink id="removeLinkBtn" title="Разлинковать" disabled="#{linkerController.disableLinksBtn}"
                                                       styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                       onstart="PF('statusDialog').show();"
                                                       oncomplete="PF('statusDialog').hide(); PF('linkedDataTableWidget').filter();
                                                                    PF('objectTabViewWidget').disable(1); PF('objectTabViewWidget').disable(2);"
                                                       update="linkerForm:linkerTabView:objectTabView:recountBtn
                                                                linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                                                linkerForm:linkerTabView:objectTabView:linkTemplate
                                                                linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                                                linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                                                recountForm:recountPanel growl"
                                                       action="#{linkerController.removeLink}" global="false">
                                            <h:outputText styleClass="ui-icon fa-solid fa-link-slash" style="font-size: .9rem; vertical-align: 1px;"/>
                                        </p:commandLink>
                                        <p:commandLink id="addLinkBtn" title="Долинковать" disabled="#{linkerController.disableLinksBtn}"
                                                       styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                       action="#{linkerController.loadOpcObjectsForLink()}"
                                                       oncomplete="PF('addLinkDialogWidget').show(); PF('opcObjectsForLinkTableWidget').filter();"
                                                       update="addLinkDialogHeader">
                                            <h:outputText styleClass="ui-icon fa-solid fa-link" style="font-size: .9rem; vertical-align: 1px;"/>
                                        </p:commandLink>
                                    </h:panelGroup>
                                    <p:divider layout="vertical" style="padding: 0.6rem 0; margin: 0 0.5rem;"/>
                                    <p:commandLink title="Обновить дерево Орг. структуры"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   action="#{linkerController.updateOrgTree}"
                                                   onstart="PF('statusDialog').show();" oncomplete="PF('statusDialog').hide();"
                                                   update="growl">
                                        <h:outputText styleClass="ui-icon pi pi-sync"/>
                                    </p:commandLink>
                                    <p:divider layout="vertical" style="padding: 0.6rem 0; margin: 0 0.5rem;"/>
                                    <p:commandLink id="setSchemaNameBtn" title="Задать название схеме линковки" disabled="#{linkerController.disableLinksBtn}"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   onclick="PF('createMaskDialogWidget').show();">
                                        <h:outputText styleClass="ui-icon pi pi-book"/>
                                    </p:commandLink>
                                    <custom:dropdownPanel id="reportBtn" disabled="#{linkerController.disableLinksBtn}"
                                                          header="Отчеты" title="Отчеты" icon="pi pi-file-excel">
                                        <p:commandButton icon="pi pi-file-excel" value="Отчет по линковке"
                                                         action="#{linkerController.openReport}"
                                                         onclick="changeVisible('linkerForm:linkerTabView:objectTabView:reportBtn:dropdownDiv')"
                                                         styleClass="ui-button-flat ui-button-plain tc-no-loading"
                                                         style="width: 100%; text-align: initial; color: #000;" />
                                    </custom:dropdownPanel>
                                    <h:panelGroup id="linkTemplate" layout="block">
                                        <custom:dropdownPanel id="linkTemplateDropdown"
                                                                rendered="#{linkerController.renderContextSubMenu}"
                                                                disabled="#{linkerController.templateLinkNames.isEmpty()}"
                                                                width="260"
                                                                header="Добавить шаблон линковки" title="Добавить шаблон линковки"
                                                                icon="fa-solid fa-file-circle-plus" style="vertical-align: 1px;">
                                            <div style="margin: 3px; display: flex; flex-direction: column; width: 100%;">
                                                <c:forEach items="#{linkerController.templateLinkNames}" var="linkName">
                                                    <p:commandButton value="#{linkName}" action="#{linkerController.addLinkTemplate(linkName)}"
                                                                     onclick="changeVisible('linkerForm:linkerTabView:objectTabView:linkTemplateDropdown:dropdownDiv')"
                                                                     styleClass="ui-button-flat ui-button-plain tc-no-loading"
                                                                     style="width: 100%; text-align: initial; color: #000;"
                                                                     update="growl"/>
                                                </c:forEach>
                                            </div>
                                        </custom:dropdownPanel>
                                    </h:panelGroup>
                                    <p:commandLink id="redirectBtn_1" title="Источники данных" process="@this"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   onclick="changeStyle('redirectForm', 'right', '70px');
                                                            changeVisible('redirectForm', 'linkerForm:linkerTabView:objectTabView:redirectBtn_1');">
                                        <h:outputText styleClass="ui-icon pi pi-sitemap -rotate-90"/>
                                    </p:commandLink>
                                    <p:commandLink id="recountBtn" title="Пересчет" disabled="#{linkerController.disableLinksBtn}"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   onclick="changeVisible('recountForm', 'linkerForm:linkerTabView:objectTabView:recountBtn');">
                                        <h:outputText styleClass="ui-icon pi pi-calculator"/>
                                    </p:commandLink>
                                    <p:commandLink id="filterBtn" title="Фильтр" process="@this"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   onclick="changeVisible('filterForm', 'filterForm:filterSelectOneMenu_panel', 'linkerForm:linkerTabView:objectTabView:filterBtn');">
                                        <h:outputText styleClass="ui-icon pi pi-filter-fill"/>
                                    </p:commandLink>
                                </div>
                            </f:facet>
                        </p:panel>
                    </p:tab>
                    <p:tab title="Параметры">
                        <p:panel id="paramDataPanel" styleClass="tc-panel">
                            <f:facet name="header">
                                <h:outputText id="paramDataPanelHeader"
                                              value="Параметры#{linkerController.fullObjectName}"/>
                            </f:facet>

                            <div style="height: 100%; padding: 3px; display: flex;">
                                <p:panel id="paramTreePanel" styleClass="tc-panel tc-panel-header-small" style="width: 40%; margin-right: 3px;">
                                    <f:facet name="header">
                                        <h:outputText id="paramTreePanelHeader"
                                                      value="#{linkerController.paramTreePanelHeader}"/>
                                    </f:facet>

                                    <div style="padding: 3px;">
                                        <span class="ui-input-icon-left" style="width: 100%;">
                                            <i class="pi pi-search"/>
                                            <p:inputText id="filterParamTree"
                                                         widgetVar="paramTreeWidgetFilter" binding="#{linkerController.paramTreeFilter}"
                                                         value="#{linkerController.filterParamTreeValue}"
                                                         placeholder="Поиск..." style="width: 100%">
                                                <p:ajax event="keyup" delay="500" oncomplete="filterTree([{name:'widget', value:'paramTreeWidget'}]);"/>
                                            </p:inputText>
                                        </span>
                                    </div>
                                    <div style="height: calc(100% - 43px);" class="tc-custom-scroll">
                                        <p:tree id="paramTree" binding="#{linkerController.paramTree}"
                                                value="#{linkerController.rootKmOmTree}" var="paramNode" styleClass="ui-noborder"
                                                widgetVar="paramTreeWidget" filterFunction="#{linkerController.customFilter}"
                                                dynamic="true" animate="true" cache="false"
                                                selection="#{linkerController.selectedParamTreeNode}" selectionMode="single"
                                                draggable="true" droppable="true" onDrop="#{linkerController.onDrop}" dragdropScope="param">

                                            <p:ajax event="select" listener="#{linkerController.onSelectParamTree}"
                                                    onstart="unselectNode('paramOpcTreeWidget');"
                                                    oncomplete="handleMsg(xhr, status, args);"/>
                                            <p:ajax event="unselect"/>
                                            <p:ajax event="collapse"/>
                                            <p:ajax event="expand" oncomplete="initDragDropForTree('paramTreeWidget');"/>
                                            <p:ajax event="filter" oncomplete="initDragDropForTree('paramTreeWidget');"/>
                                            <p:ajax event="contextMenu" onstart="selectNode('paramTreeWidget');"/>

                                            <p:treeNode expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder">
                                                <h:outputText value="#{paramNode.name}" title="#{paramNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="TP" expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder" styleClass="tc-first-tree-item">
                                                <h:outputText value="#{paramNode.name}" title="#{paramNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="PT" expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder">
                                                <h:outputText value="#{paramNode.name}" title="#{paramNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="LPA" icon="pi pi-cog lColor">
                                                <h:outputText value="#{paramNode.name}" title="#{paramNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLPA" icon="pi pi-cog nlColor">
                                                <h:outputText value="#{paramNode.name}" title="#{paramNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="LSA" icon="pi pi pi-check-circle lColor">
                                                <h:outputText value="#{paramNode.name}" title="#{paramNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLSA" icon="pi pi pi-check-circle nlColor">
                                                <h:outputText value="#{paramNode.name}" title="#{paramNode.name}"/>
                                            </p:treeNode>
                                        </p:tree>

                                        <p:contextMenu for="paramTree" nodeType="TP" style="visibility: hidden;">
                                        </p:contextMenu>
                                        <p:contextMenu for="paramTree" nodeType="PT" style="visibility: hidden;">
                                        </p:contextMenu>
                                        <p:contextMenu for="paramTree" nodeType="LPA" style="visibility: hidden;">
                                        </p:contextMenu>
                                        <p:contextMenu for="paramTree" nodeType="NLPA" style="visibility: hidden;">
                                        </p:contextMenu>
                                        <p:contextMenu for="paramTree" nodeType="LSA" style="width: 150px;">
                                            <p:menuitem value="Разлинковать" process="@this"
                                                        action="#{linkerController.removeParamLink()}"
                                                        icon="pi pi-minus-circle"/>
                                        </p:contextMenu>
                                        <p:contextMenu for="paramTree" nodeType="NLSA" style="visibility: hidden;">
                                        </p:contextMenu>
                                    </div>

                                    <f:facet name="actions">
                                        <div style="display: flex;">
                                            <p:commandLink title="Свернуть дерево"
                                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                           process="@this" global="false"
                                                           actionListener="#{linkerController.setFilterParamTreeValue('')}"
                                                           action="#{linkerController.doCollapseAll(linkerController.rootKmOmTree)}"
                                                           oncomplete="document.getElementById('linkerForm:linkerTabView:objectTabView:paramTree_filter').value = 'init';
                                                                    initDragDropForTree('paramTreeWidget');"
                                                           update="linkerForm:linkerTabView:objectTabView:paramTree
                                                                    linkerForm:linkerTabView:objectTabView:filterParamTree">
                                                <h:outputText styleClass="ui-icon fa-solid fa-down-left-and-up-right-to-center" style="font-size: .9rem; vertical-align: 1px;"/>
                                            </p:commandLink>
                                            <p:commandLink id="filterParamTreeBtn" title="фильтр"
                                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                           onclick="changeVisible('filterParamTreeForm',
                                                                        'filterParamTreeForm:filterParamTreeSelectOneMenu_panel',
                                                                        'linkerForm:linkerTabView:objectTabView:filterParamTreeBtn');"
                                                           process="@this">
                                                <h:outputText styleClass="ui-icon pi pi-filter-fill"/>
                                            </p:commandLink>
                                        </div>
                                    </f:facet>
                                </p:panel>

                                <p:panel id="paramOpcTreePanel" styleClass="tc-panel tc-panel-header-small" style="width: 60%;">
                                    <f:facet name="header">
                                        <h:outputText id="paramOpcTreePanelHeader"
                                                      value="Тэги источников данных объектов (#{linkerController.paramOpcTreePanelHeader})"/>
                                    </f:facet>

                                    <div style="padding: 3px;">
                                        <span class="ui-input-icon-left" style="width: 100%;">
                                            <i class="pi pi-search"/>
                                            <p:inputText id="filterParamOpcTree"
                                                         widgetVar="paramOpcTreeWidgetFilter" binding="#{linkerController.paramOpcTreeFilter}"
                                                         value="#{linkerController.filterParamOpcTreeValue}"
                                                         placeholder="Поиск..." style="width: 100%" >
                                                <p:ajax event="keyup" delay="500" oncomplete="filterTree([{name:'widget', value:'paramOpcTreeWidget'}]);"/>
                                            </p:inputText>
                                        </span>
                                    </div>
                                    <div style="height: calc(100% - 43px);" class="tc-custom-scroll">
                                        <p:tree id="paramOpcTree" binding="#{linkerController.paramOpcTree}"
                                                value="#{linkerController.rootOpcTree}" var="paramOpcNode" styleClass="ui-noborder"
                                                widgetVar="paramOpcTreeWidget" filterFunction="#{linkerController.customFilter}"
                                                dynamic="true" animate="true" cache="false"
                                                selection="#{linkerController.selectedParamOpcTreeNode}" selectionMode="single"
                                                draggable="true" droppable="true" onDrop="#{linkerController.onDrop}" dragdropScope="param">

                                            <p:ajax event="select" listener="#{linkerController.onSelectParamTree}"
                                                    onstart="unselectNode('paramTreeWidget');"
                                                    oncomplete="handleMsg(xhr, status, args);"/>
                                            <p:ajax event="unselect"/>
                                            <p:ajax event="collapse"/>
                                            <p:ajax event="expand" oncomplete="initDragDropForTree('paramOpcTreeWidget');"/>
                                            <p:ajax event="filter" oncomplete="initDragDropForTree('paramOpcTreeWidget');"/>
                                            <p:ajax event="contextMenu" onstart="selectNode('paramOpcTreeWidget');"/>

                                            <p:treeNode expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder">
                                                <h:outputText value="#{paramOpcNode.name}" title="#{paramOpcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="LOO" expandedIcon="pi pi-folder-open lColor" collapsedIcon="pi pi-folder lColor" styleClass="tc-first-tree-item">
                                                <h:outputText value="#{paramOpcNode.name}" title="#{paramOpcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLOO" expandedIcon="pi pi-folder-open nlColor" collapsedIcon="pi pi-folder nlColor" styleClass="tc-first-tree-item">
                                                <h:outputText value="#{paramOpcNode.name}" title="#{paramOpcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="LOP" icon="pi pi pi-check-circle lColor">
                                                <h:outputText value="#{paramOpcNode.name}" title="#{paramOpcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLOP" icon="pi pi pi-check-circle nlColor">
                                                <h:outputText value="#{paramOpcNode.name}" title="#{paramOpcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLBOP" icon="pi pi pi-check-circle nlbopColor">
                                                <h:outputText value="#{paramOpcNode.name}" title="#{paramOpcNode.name}"/>
                                            </p:treeNode>
                                        </p:tree>

                                        <p:contextMenu for="paramOpcTree" nodeType="LOO" style="visibility: hidden;">
                                        </p:contextMenu>
                                        <p:contextMenu for="paramOpcTree" nodeType="NLOO" style="visibility: hidden;">
                                        </p:contextMenu>
                                        <p:contextMenu for="paramOpcTree" nodeType="LOP" style="width: 150px;">
                                            <p:menuitem value="Разлинковать" process="@this"
                                                        action="#{linkerController.removeParamLink()}"
                                                        icon="pi pi-minus-circle"/>
                                        </p:contextMenu>
                                        <p:contextMenu for="paramOpcTree" nodeType="NLOP" style="visibility: hidden;">
                                        </p:contextMenu>
                                        <p:contextMenu for="paramOpcTree" nodeType="NLBOP" style="visibility: hidden;">
                                        </p:contextMenu>
                                    </div>

                                    <f:facet name="actions">
                                        <div style="display: flex;">
                                            <p:commandLink title="Свернуть дерево"
                                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                           process="@this" global="false"
                                                           actionListener="#{linkerController.setFilterParamOpcTreeValue('')}"
                                                           action="#{linkerController.doCollapseAll(linkerController.rootOpcTree)}"
                                                           oncomplete="document.getElementById('linkerForm:linkerTabView:objectTabView:paramOpcTree_filter').value = 'init';
                                                                    initDragDropForTree('paramOpcTreeWidget');"
                                                           update="linkerForm:linkerTabView:objectTabView:paramOpcTree
                                                                    linkerForm:linkerTabView:objectTabView:filterParamOpcTree">
                                                <h:outputText styleClass="ui-icon fa-solid fa-down-left-and-up-right-to-center" style="font-size: .9rem; vertical-align: 1px;"/>
                                            </p:commandLink>
                                            <p:commandLink id="refreshParamOpcTreeBtn" title="Обновить"
                                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                           action="#{linkerController.refreshParamOpcTree}" process="@this" global="false"
                                                           onstart="PF('statusDialog').show();"
                                                           oncomplete="PF('statusDialog').hide(); filterTree([{name:'widget', value:'paramOpcTreeWidget'}]);
                                                                unselectNode('paramTreeWidget', false); unselectNode('paramOpcTreeWidget', false);
                                                                PF('filterParamOpcTreeSelectOneMenuWidget').selectValue(1);"
                                                           update="linkerForm:linkerTabView:objectTabView:paramOpcTreePanelHeader
                                                                linkerForm:linkerTabView:objectTabView:filterParamOpcTree">
                                                <h:outputText styleClass="ui-icon pi pi-refresh"/>
                                            </p:commandLink>
                                            <p:commandLink id="requestOpcParamBtn" title="Запросить параметры"
                                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                           action="#{linkerController.requestOpcParam}" process="@this" global="false"
                                                           onstart="PF('statusDialog').show();"
                                                           oncomplete="PF('statusDialog').hide();">
                                                <h:outputText styleClass="ui-icon pi pi-cloud-download"/>
                                            </p:commandLink>
                                            <p:commandLink id="filterParamOpcTreeBtn" title="фильтр"
                                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                           onclick="changeVisible('filterParamOpcTreeForm',
                                                                                    'filterParamOpcTreeForm:filterParamOpcTreeSelectOneMenu_panel',
                                                                                    'linkerForm:linkerTabView:objectTabView:filterParamOpcTreeBtn');"
                                                           process="@this">
                                                <h:outputText styleClass="ui-icon pi pi-filter-fill"/>
                                            </p:commandLink>
                                        </div>
                                    </f:facet>
                                </p:panel>
                            </div>

                            <f:facet name="actions">
                                <div style="display: flex;">
                                    <custom:dropdownPanel header="Отчеты" title="Отчеты" icon="pi pi-file-excel">
                                        <p:commandButton icon="pi pi-file-excel" value="Отчет по линковке"
                                                         action="#{linkerController.openReport}"
                                                         styleClass="ui-button-flat ui-button-plain tc-no-loading"
                                                         style="width: 100%; text-align: initial; color: #000;" />
                                    </custom:dropdownPanel>
                                    <p:commandLink id="redirectBtn_2" title="Источники данных" process="@this"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   onclick="changeStyle('redirectForm', 'right', '20px');
                                                            changeVisible('redirectForm', 'linkerForm:linkerTabView:objectTabView:redirectBtn_2');">
                                        <h:outputText styleClass="ui-icon pi pi-sitemap -rotate-90"/>
                                    </p:commandLink>
                                </div>
                            </f:facet>
                        </p:panel>
                    </p:tab>
                    <p:tab title="Вычислимые параметры">
                        <p:panel id="calcParamDataPanel" styleClass="tc-panel">
                            <f:facet name="header">
                                <h:outputText id="calcParamDataPanelHeader"
                                              value="Вычислимые параметры#{linkerController.fullObjectName}"/>
                            </f:facet>

                            <div style="height: 100%; padding: 3px; display: flex;">
                                <p:panel id="calcTreePanel" header="Обобщенная модель"
                                         styleClass="tc-panel tc-panel-header-small" style="width: 40%; margin-right: 3px;">
                                    <div style="padding: 3px;">
                                        <span class="ui-input-icon-left" style="width: 100%;">
                                            <i class="pi pi-search"/>
                                            <p:inputText id="filterCalcTree"
                                                         widgetVar="calcTreeWidgetFilter" binding="#{linkerController.calcTreeFilter}"
                                                         value="#{linkerController.filterCalcTreeValue}"
                                                         placeholder="Поиск..." style="width: 100%" >
                                                <p:ajax event="keyup" delay="500" oncomplete="filterTree([{name:'widget', value:'calcTreeWidget'}]);"/>
                                            </p:inputText>
                                        </span>
                                    </div>
                                    <div style="height: calc(100% - 43px);" class="tc-custom-scroll">
                                        <p:tree id="calcTree" binding="#{linkerController.calcTree}"
                                                value="#{linkerController.rootCalcTree}" var="calcNode" styleClass="ui-noborder"
                                                widgetVar="calcTreeWidget" filterFunction="#{linkerController.customFilter}"
                                                style="padding: 3px;" dynamic="true" animate="true" cache="false"
                                                selection="#{linkerController.selectedCalcTreeNode}" selectionMode="single">

                                            <p:ajax event="select" listener="#{linkerController.onCalcTreeNodeSelect}"
                                                    update="linkerForm:linkerTabView:objectTabView:calcDataTable
                                                        linkerForm:linkerTabView:objectTabView:removeCalcLinkBtn
                                                        linkerForm:linkerTabView:objectTabView:createCalcLinkBtn"/>
                                            <p:ajax event="unselect"/>
                                            <p:ajax event="collapse"/>
                                            <p:ajax event="expand"/>

                                            <p:treeNode expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="TP" expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder" styleClass="tc-first-tree-item">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="PT" expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="LPA" icon="pi pi-cog lColor">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLPA" icon="pi pi-cog nlColor">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="LSA" icon="pi pi pi-check-circle lColor">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLSA" icon="pi pi pi-check-circle nlColor">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                            <p:treeNode type="NLBOP" icon="pi pi pi-check-circle nlbopColor">
                                                <h:outputText value="#{calcNode.name}" title="#{calcNode.name}"/>
                                            </p:treeNode>
                                        </p:tree>
                                    </div>

                                    <f:facet name="actions">
                                        <div style="display: flex;">
                                            <p:commandLink title="Свернуть дерево"
                                                           styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                           process="@this" global="false"
                                                           actionListener="#{linkerController.setFilterCalcTreeValue('')}"
                                                           action="#{linkerController.doCollapseAll(linkerController.rootCalcTree)}"
                                                           oncomplete="document.getElementById('linkerForm:linkerTabView:objectTabView:calcTree').value = 'init';"
                                                           update="linkerForm:linkerTabView:objectTabView:calcTree
                                                                    linkerForm:linkerTabView:objectTabView:filterCalcTree">
                                                <h:outputText styleClass="ui-icon fa-solid fa-down-left-and-up-right-to-center" style="font-size: .9rem; vertical-align: 1px;"/>
                                            </p:commandLink>
                                        </div>
                                    </f:facet>
                                </p:panel>

                                <p:outputPanel style="width: 60%; border: 1px solid #c8c8c8; border-radius: 3px;">
                                    <p:dataTable id="calcDataTable" value="#{linkerController.calcDataTableList}" var="calcData"
                                                 emptyMessage="#{global['table.empty.value']}" rowStyleClass="#{calcData.styleClass}">
                                        <p:column headerText="Параметр" width="100" styleClass="center">
                                            <h:outputText value="#{calcData.name}"/>
                                        </p:column>
                                        <p:column headerText="Стат. агрегат" width="250" styleClass="center">
                                            <h:outputText value="#{calcData.statAggr}"/>
                                        </p:column>
                                        <p:column headerText="Название" width="100%">
                                            <h:outputText value="#{calcData.fullName}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:outputPanel>
                            </div>

                            <f:facet name="actions">
                                <div style="display: flex;">
                                    <h:outputText value="Линковка:" style="margin-right: 3px;"/>
                                    <p:commandLink id="createCalcLinkBtn" title="Слинковать" disabled="#{!linkerController.enableCalcLinksBtn}"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   update="linkerForm:linkerTabView:objectTabView:removeCalcLinkBtn
                                                        linkerForm:linkerTabView:objectTabView:createCalcLinkBtn
                                                        growl"
                                                   oncomplete="filterTree([{name:'widget', value:'calcTreeWidget'}, {name:'updateSelect', value:'true'}]);"
                                                   action="#{linkerController.createCalcLink()}">
                                        <h:outputText styleClass="ui-icon fa-solid fa-link" style="font-size: .9rem; vertical-align: 1px;"/>
                                    </p:commandLink>
                                    <p:commandLink id="removeCalcLinkBtn" title="Разлинковать" disabled="#{!linkerController.enableCalcUnlinksBtn}"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   update="linkerForm:linkerTabView:objectTabView:removeCalcLinkBtn
                                                        linkerForm:linkerTabView:objectTabView:createCalcLinkBtn
                                                        growl"
                                                   oncomplete="filterTree([{name:'widget', value:'calcTreeWidget'}, {name:'updateSelect', value:'true'}]);"
                                                   action="#{linkerController.removeCalcLink()}">
                                        <h:outputText styleClass="ui-icon fa-solid fa-link-slash" style="font-size: .9rem; vertical-align: 1px;"/>
                                    </p:commandLink>
                                    <p:divider layout="vertical" style="padding: 0.6rem 0; margin: 0 0.5rem;"/>
                                    <custom:dropdownPanel header="Отчеты" title="Отчеты" icon="pi pi-file-excel">
                                        <p:commandButton icon="pi pi-file-excel" value="Отчет по линковке"
                                                         action="#{linkerController.openReport}"
                                                         styleClass="ui-button-flat ui-button-plain tc-no-loading"
                                                         style="width: 100%; text-align: initial; color: #000;" />
                                    </custom:dropdownPanel>
                                    <p:commandLink id="redirectBtn_3" title="Источники данных" process="@this"
                                                   styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-default tc-very-small tc-no-loading"
                                                   onclick="changeStyle('redirectForm', 'right', '20px');
                                                            changeVisible('redirectForm', 'linkerForm:linkerTabView:objectTabView:redirectBtn_3');">
                                        <h:outputText styleClass="ui-icon pi pi-sitemap -rotate-90"/>
                                    </p:commandLink>
                                </div>
                            </f:facet>
                        </p:panel>
                    </p:tab>
                </p:tabView>
            </p:tab>
        </p:tabView>
    </h:form>

    <h:form id="filterForm" style="display: none; top: 66px; right: 23px;" styleClass="popupPanel">
        <p:panel id="filterPanel" styleClass="tc-panel tc-panel-popup">
            <f:facet name="header">
                    <span class="ui-icon pi pi-filter-fill" style="margin-right: 5px;" />
                    <h:outputText value="Фильтр" />
            </f:facet>

            <div style="margin: 3px;">
                <p:outputLabel value="Тип Объекта" style="margin-right: 5px; font-weight: bold;"/>
                <p:selectOneMenu value="#{linkerController.selectedObjectType}" id="filterSelectOneMenu" style="width: 280px;">
                    <p:ajax listener="#{linkerController.onObjectTypeChange}" global="false"
                            onstart="PF('statusDialog').show(); changeVisible('filterForm');"
                            oncomplete="PF('statusDialog').hide(); PF('linkedDataTableWidget').clearFilters();
                                PF('objectTabViewWidget').disable(1); PF('objectTabViewWidget').disable(2);"
                            update="linkerForm:linkerTabView:objectTabView:linkedDataPanelHeader
                                linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                linkerForm:linkerTabView:objectTabView:recountBtn
                                linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                linkerForm:linkerTabView:objectTabView:linkTemplate
                                linkerForm:linkerTabView:objectTabView:linkBtnGroup"/>
                    <f:converter converterId="objectTypeConverter"/>

                    <f:selectItems value="#{objectTypeControllerApplication.objectTypes}" var="objType"
                                   itemLabel="#{objType.name}" itemValue="#{objType}"/>
                </p:selectOneMenu>
            </div>
        </p:panel>
    </h:form>

    <h:form id="filterParamTreeForm" style="display: none; top: 104px; right: 61.2%;" styleClass="popupPanel">
        <p:panel id="filterParamTreePanel" styleClass="tc-panel tc-panel-popup">
            <f:facet name="header">
                <span class="ui-icon pi pi-filter-fill" style="margin-right: 5px;" />
                <h:outputText value="Фильтр" />
            </f:facet>

            <div style="margin: 3px;">
                <p:outputLabel value="Тип модели" style="margin-right: 5px; font-weight: bold;"/>
                <p:selectOneMenu id="filterParamTreeSelectOneMenu" style="width: 280px;" widgetVar="filterParamTreeSelectOneMenuWidget"
                                 valueChangeListener="#{linkerController.onParamTreeModelChange}">

                    <p:ajax global="false"
                            onstart="PF('statusDialog').show(); changeVisible('filterParamTreeForm');"
                            oncomplete="PF('statusDialog').hide(); filterTree([{name:'widget', value:'paramTreeWidget'}]);
                                unselectNode('paramTreeWidget', false); unselectNode('paramOpcTreeWidget', false);"
                            update="linkerForm:linkerTabView:objectTabView:paramTreePanelHeader
                                linkerForm:linkerTabView:objectTabView:filterParamTree"/>

                    <f:selectItem itemLabel="Конкретная модель" itemValue="1"/>
                    <f:selectItem itemLabel="Обобщенная модель" itemValue="2"/>
                </p:selectOneMenu>
            </div>
        </p:panel>
    </h:form>

    <h:form id="filterParamOpcTreeForm" style="display: none; top: 104px; right: 28px;" styleClass="popupPanel">
        <p:panel id="filterParamOpcTreePanel" styleClass="tc-panel tc-panel-popup">
            <f:facet name="header">
                <span class="ui-icon pi pi-filter-fill" style="margin-right: 5px;" />
                <h:outputText value="Фильтр" />
            </f:facet>

            <div style="margin: 3px;">
                <p:outputLabel value="Тип параметров" style="margin-right: 5px; font-weight: bold;"/>
                <p:selectOneMenu id="filterParamOpcTreeSelectOneMenu" style="width: 280px;" widgetVar="filterParamOpcTreeSelectOneMenuWidget"
                                 valueChangeListener="#{linkerController.onParamOpcTreeModelChange}">

                    <p:ajax global="false"
                            onstart="PF('statusDialog').show(); changeVisible('filterParamOpcTreeForm');"
                            oncomplete="PF('statusDialog').hide(); filterTree([{name:'widget', value:'paramOpcTreeWidget'}]);
                                unselectNode('paramTreeWidget', false); unselectNode('paramOpcTreeWidget', false);"
                            update="linkerForm:linkerTabView:objectTabView:paramOpcTreePanelHeader
                                linkerForm:linkerTabView:objectTabView:filterParamOpcTree"/>

                    <f:selectItem itemLabel="Все параметры" itemValue="1"/>
                    <f:selectItem itemLabel="Линкованные параметры" itemValue="2"/>
                    <f:selectItem itemLabel="Нелинкованные параметры" itemValue="3"/>
                </p:selectOneMenu>
            </div>
        </p:panel>
    </h:form>

    <h:form id="recountForm" style="display: none; top: 66px; right: 48px;" styleClass="popupPanel">
        <p:panel id="recountPanel" styleClass="tc-panel tc-panel-popup">
            <f:facet name="header">
                <span class="ui-icon pi pi-calculator" style="margin-right: 5px;" />
                <h:outputText value="Пересчет" />
            </f:facet>

            <div style="margin: 3px; display: flex; flex-direction: column;">
                <p:selectBooleanCheckbox value="#{linkerController.selectedLinkedData.recount['PRESSURE']}"
                                         itemLabel="Пересчет давления" style="margin-bottom: 5px;">
                    <p:ajax listener="#{linkerController.recount('PRESSURE')}"
                            onstart="changeVisible('recountForm');"
                            update="@this growl"/>
                </p:selectBooleanCheckbox>
                <p:selectBooleanCheckbox value="#{linkerController.selectedLinkedData.recount['TIME']}"
                                         itemLabel="Пересчет времени" style="margin-bottom: 5px;">
                    <p:ajax listener="#{linkerController.recount('TIME')}"
                            onstart="changeVisible('recountForm');"
                            update="@this growl"/>
                </p:selectBooleanCheckbox>
                <p:selectBooleanCheckbox value="#{linkerController.selectedLinkedData.recount['RESISTANCE']}"
                                         itemLabel="Пересчет сопротивления">
                    <p:ajax listener="#{linkerController.recount('RESISTANCE')}"
                            onstart="changeVisible('recountForm');"
                            update="@this growl"/>
                </p:selectBooleanCheckbox>
            </div>
        </p:panel>
    </h:form>

    <h:form id="redirectForm" style="display: none; top: 66px;" styleClass="popupPanel">
        <p:panel id="redirectPanel" styleClass="tc-panel tc-panel-popup">
            <f:facet name="header">
                <span class="ui-icon pi pi-sitemap -rotate-90" style="margin-right: 5px;" />
                <h:outputText value="Источники данных" />
            </f:facet>

            <div style="margin: 3px; display: flex; flex-direction: column;">
                <p:menu model="#{linkerController.redirectMenu}" style="border: 0;"/>
            </div>
        </p:panel>
    </h:form>

    <p:dialog header="Задать название схеме линковки" widgetVar="createMaskDialogWidget"
              width="450" modal="true" resizable="false" styleClass="tc-panel" showEffect="fade" hideEffect="fade">

        <p:ajax event="close" listener="#{linkerController.onCreateMaskDialogClose()}" update="addNameForm" resetValues="true"/>

        <h:form id="addNameForm" style="margin-bottom: 45px;">
            <div style="text-align: center; margin-top: 3px; margin-bottom: 3px;">
                <p:outputLabel value="Название" for="@next" style="margin-right: 5px;"/>
                <p:inputText required="true" value="#{linkerController.newMaskName}"
                             requiredMessage="#{global['validation.view.text']}" style="width: 300px;"/>
            </div>
            <div style="display: flex;">
                <p:message style="margin: auto" for="@previous" styleClass="tc-show-on-active" />
            </div>
            <p:commandButton value="Сохранить" style="position: absolute; bottom: 5px; right: 100px;" styleClass="tc-no-loading"
                             validateClient="true" update="addNameForm" action="#{linkerController.createMaskWrapper()}"/>
            <p:commandButton value="Отмена" styleClass="ui-button-secondary tc-no-loading" style="position: absolute; bottom: 5px; right: 5px;"
                             onclick="PF('createMaskDialogWidget').hide();" process="@this"/>
        </h:form>
    </p:dialog>

    <p:dialog id="addLinkDialog" widgetVar="addLinkDialogWidget"
              width="800" height="500" modal="true" resizable="false"
              styleClass="tc-panel" showEffect="fade" hideEffect="fade">

        <f:facet name="header">
            <h:outputText id="addLinkDialogHeader" value="Долинковать объект #{linkerController.selectedLinkedData.dbObject.name}"/>
        </f:facet>

        <p:ajax event="close" listener="#{linkerController.onAddLinkDialogClose()}"
                oncomplete="PF('opcObjectsForLinkTableWidget').clearFilters();" resetValues="true"
                update="addLinkForm:saveAddLink"/>

        <h:form id="addLinkForm" style="margin-bottom: 45px; padding: 3px 0 3px 3px;">
            <p:dataTable id="opcObjectsForLinkTable" value="#{linkerController.opcObjectsForLinkData}" var="opcObjectForLink"
                         rowKey="#{opcObjectForLink.id}" widgetVar="opcObjectsForLinkTableWidget"
                         selection="#{linkerController.selectedOpcObjectsForLink}" selectionMode="multiple"
                         scrollable="true" scrollHeight="368"
                         lazy="true" virtualScroll="true" scrollRows="100"
                         emptyMessage="#{global['table.empty.value']}">
                <p:ajax event="rowSelect" update="addLinkForm:saveAddLink"/>

                <p:column headerText="Объекты автоматизации"
                          filterBy="#{opcObjectForLink.opcObject.name}" filterMatchMode="contains">
                    <h:outputText value="#{opcObjectForLink.opcObject.name}"/>

                    <f:facet name="filter">
                        <p:inputText placeholder="Поиск..." style="width: 100%;"
                                     onkeyup="PF('opcObjectsForLinkTableWidget').filter();"/>
                    </f:facet>
                </p:column>
                <p:column headerText="Сервер" width="200"
                          filterBy="#{opcObjectForLink.serverName}" filterMatchMode="contains">
                    <h:outputText value="#{opcObjectForLink.serverName}"/>

                    <f:facet name="filter">
                        <p:inputText placeholder="Поиск..." style="width: 100%;"
                                     onkeyup="PF('opcObjectsForLinkTableWidget').filter();"/>
                    </f:facet>
                </p:column>
                <p:column headerText="Кол-во тегов" width="120" styleClass="center">
                    <h:outputText value="#{opcObjectForLink.paramCount}"/>
                </p:column>
            </p:dataTable>

            <p:commandButton id="saveAddLink" value="Сохранить" style="position: absolute; bottom: 5px; right: 100px;" styleClass="tc-no-loading"
                             disabled="#{empty linkerController.selectedOpcObjectsForLink}"
                             action="#{linkerController.addLink}"
                             onstart="PF('statusDialog').show();"
                             oncomplete="PF('statusDialog').hide(); PF('linkedDataTableWidget').filter();
                                        PF('objectTabViewWidget').disable(1); PF('objectTabViewWidget').disable(2);
                                        PF('addLinkDialogWidget').hide();"
                             update="linkerForm:linkerTabView:objectTabView:recountBtn
                                    linkerForm:linkerTabView:objectTabView:reportBtn:dropdownLink
                                    linkerForm:linkerTabView:objectTabView:linkTemplate
                                    linkerForm:linkerTabView:objectTabView:setSchemaNameBtn
                                    linkerForm:linkerTabView:objectTabView:linkBtnGroup
                                    recountForm:recountPanel growl"/>
            <p:commandButton value="Отмена" styleClass="ui-button-secondary tc-no-loading" style="position: absolute; bottom: 5px; right: 5px;"
                             onclick="PF('addLinkDialogWidget').hide();" process="@this"/>
        </h:form>
    </p:dialog>

    <p:dialog id="showOpcObjectParamsDialog" widgetVar="showOpcObjectParamsDialogWidget"
              width="700" height="450" modal="true" resizable="false"
              styleClass="tc-panel" showEffect="fade" hideEffect="fade">

        <f:facet name="header">
            <h:outputText id="showOpcObjectParamsDialogHeader" value="Параметры объекта #{linkerController.selectedOpcObjectsForNoLink.opcObject.name}"/>
        </f:facet>

        <p:ajax event="close" listener="#{linkerController.onShowOpcObjectParamsDialogClose()}"
                oncomplete="PF('showOpcObjectParamsTableWidget').clearFilters();" resetValues="true"/>

        <h:form id="showOpcObjectParamsForm" style="padding: 3px 0 3px 3px;">
            <p:dataTable id="showOpcObjectParamsTable" value="#{linkerController.opcObjectParams}" var="opcObjectParam"
                         rowKey="#{opcObjectParam.id}" widgetVar="showOpcObjectParamsTableWidget"
                         scrollable="true" scrollHeight="364"
                         lazy="true" virtualScroll="true" scrollRows="100"
                         emptyMessage="#{global['table.empty.value']}">
                <p:column headerText="Название"
                          filterBy="#{opcObjectParam.opcObject.name}" filterMatchMode="contains">
                    <h:outputText value="#{opcObjectParam.opcObject.name}"/>

                    <f:facet name="filter">
                        <p:inputText placeholder="Поиск..." style="width: 100%;"
                                     onkeyup="PF('showOpcObjectParamsTableWidget').filter();"/>
                    </f:facet>
                </p:column>
            </p:dataTable>
        </h:form>
    </p:dialog>

    <p:dialog id="schemaLinkDialog" widgetVar="schemaLinkDialogWidget"
              width="1000" height="500" modal="true" resizable="false"
              styleClass="tc-panel" showEffect="fade" hideEffect="fade"
              header="Схемы линковки"
              onShow="PF('schemaLinkDialogWidget').closeIcon.unbind('click').on('click', function() {schemaLinkDialogClose()});">

        <p:ajax event="close" listener="#{linkerController.onSchemaLinkDialogClose()}"
                oncomplete="PF('schemaLinkTableWidget').clearFilters();"
                update="schemaLinkForm:link" resetValues="true"/>

        <h:form id="schemaLinkForm" style="margin-bottom: 45px; padding: 3px 0 3px 3px;">
            <p:dataTable id="schemaLinkTable" value="#{linkerController.linkSchemaTable}" var="linkSchema"
                         rowKey="#{linkSchema.id}" widgetVar="schemaLinkTableWidget"
                         selection="#{linkerController.selectedLinkSchema}" selectionMode="single"
                         scrollable="true" scrollHeight="368"
                         lazy="true" virtualScroll="true" scrollRows="100"
                         emptyMessage="#{global['table.empty.value']}">

                <p:ajax event="rowSelect" update="schemaLinkForm:link"/>

                <p:columnGroup type="header">
                    <p:row>
                        <p:column rowspan="2" headerText="Схема линковки"
                                  filterBy="#{linkSchema.schema.name}" filterMatchMode="contains">
                            <f:facet name="filter">
                                <p:inputText placeholder="Поиск..." style="width: 100%;"
                                             onkeyup="PF('schemaLinkTableWidget').filter();"/>
                            </f:facet>
                        </p:column>
                        <p:column colspan="3" headerText="Связанные агрегаты"/>
                        <p:column colspan="3" headerText="Несвязанные агрегаты"/>
                    </p:row>
                    <p:row>
                        <p:column headerText="Совп."/>
                        <p:column headerText="Несовп."/>
                        <p:column headerText="Всего"/>
                        <p:column headerText="Совп."/>
                        <p:column headerText="Несовп."/>
                        <p:column headerText="Всего"/>
                    </p:row>
                </p:columnGroup>

                <p:column>
                    <h:outputText value="#{linkSchema.schema.name}"/>
                </p:column>
                <p:column styleClass="center">
                    <h:outputText value="#{linkSchema.eqLinked}"/>
                </p:column>
                <p:column styleClass="center">
                    <h:outputText value="#{linkSchema.neqLinked}"/>
                </p:column>
                <p:column styleClass="center">
                    <h:outputText value="#{linkSchema.allLinked}"/>
                </p:column>
                <p:column styleClass="center">
                    <h:outputText value="#{linkSchema.eqNoLinked}"/>
                </p:column>
                <p:column styleClass="center">
                    <h:outputText value="#{linkSchema.neqNoLinked}"/>
                </p:column>
                <p:column styleClass="center">
                    <h:outputText value="#{linkSchema.allNoLinked}"/>
                </p:column>
            </p:dataTable>

            <p:commandButton id="link" value="Слинковать" style="position: absolute; bottom: 5px; right: 347px;" styleClass="tc-no-loading"
                             disabled="#{linkerController.selectedLinkSchema == null}"
                             action="#{linkerController.linkBySchemaYes()}"
                             process="@this"
                             onclick="PF('schemaLinkDialogWidget').hide();"
                             oncomplete="PF('opcObjectsForNoLinkTableWidget').filter(); reloadNavigate();"
                             update="linkerForm:linkerTabView:paramBtns
                                    linkerForm:linkerTabView:selectObjects
                                    linkerForm:linkerTabView:linkBtnForNoLink"/>
            <p:commandButton value="Слинковать без параметров" style="position: absolute; bottom: 5px; right: 100px;" styleClass="tc-no-loading"
                             action="#{linkerController.linkBySchemaNoParam()}"
                             process="@this"
                             onclick="PF('schemaLinkDialogWidget').hide();"
                             oncomplete="PF('opcObjectsForNoLinkTableWidget').filter(); reloadNavigate();"
                             update="linkerForm:linkerTabView:paramBtns
                                    linkerForm:linkerTabView:selectObjects
                                    linkerForm:linkerTabView:linkBtnForNoLink"/>
            <p:commandButton value="Отмена" styleClass="ui-button-secondary tc-no-loading" style="position: absolute; bottom: 5px; right: 5px;"
                             action="#{linkerController.schemaLinkDialogClose()}"
                             process="@this"
                             onclick="PF('schemaLinkDialogWidget').hide();"/>
        </h:form>
    </p:dialog>

    <p:dialog id="statusDialog" modal="true" widgetVar="statusDialog" draggable="false" closable="false"
              resizable="false" style="box-shadow: none;" position="center center" onShow="PF('statusDialog').initPosition();">
        <i class="pi pi-spinner pi-spin" style="font-size: 5rem;" />
    </p:dialog>
</h:body>
</html>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    <h:form id="normIndicators" style="height: 100%; overflow: auto;">
        <p:panel id="rootPanel" styleClass="tc-panel" header="Нормативные показатели">
            <div style="margin-bottom: 5px;">
                <p:panel styleClass="tc-panel blue-header" header="Метрологические погрешности измерений (ГОСТ 51649-2000) Достоверность">
                    <div style="height: calc(100% - 6px); padding: 3px;">
                        <p:dataTable id="metrology" value="#{normIndicators.indicatorMetrologyList}" var="metrology"
                                     editable="#{systemParamsUtil.write}" editMode="cell"
                                     emptyMessage="#{global['table.empty.value']}" style="height: 100%;" >

                            <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                            <p:column id="m_Kt" style="text-align: center;">
                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                    <f:facet name="output">
                                        <h:outputText value="&lt;#{metrology.kt}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputNumber value="#{metrology.kt}" decimalPlaces="2"/>
                                    </f:facet>
                                </p:cellEditor>

                                <f:facet name="header">
                                    <h:outputText escape="false" value="#{normIndicators.getMetrologyHeaderName(0)}"/>
                                </f:facet>
                            </p:column>
                            <p:column id="m_Kp" style="text-align: center;">
                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                    <f:facet name="output">
                                        <h:outputText value="&lt;#{metrology.kp}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputNumber value="#{metrology.kp}" decimalPlaces="2"/>
                                    </f:facet>
                                </p:cellEditor>

                                <f:facet name="header">
                                    <h:outputText escape="false" value="#{normIndicators.getMetrologyHeaderName(1)}"/>
                                </f:facet>
                            </p:column>
                            <p:column id="m_KgKv" style="text-align: center;">
                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                    <f:facet name="output">
                                        <h:outputText value="&lt;#{metrology.kgKv}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputNumber value="#{metrology.kgKv}" decimalPlaces="2"/>
                                    </f:facet>
                                </p:cellEditor>

                                <f:facet name="header">
                                    <h:outputText escape="false" value="#{normIndicators.getMetrologyHeaderName(2)}"/>
                                </f:facet>
                            </p:column>
                            <p:column id="m_Kq" style="text-align: center;">
                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                    <f:facet name="output">
                                        <h:outputText value="&lt;#{metrology.kq}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputNumber value="#{metrology.kq}" decimalPlaces="2"/>
                                    </f:facet>
                                </p:cellEditor>

                                <f:facet name="header">
                                    <h:outputText escape="false" value="#{normIndicators.getMetrologyHeaderName(3)}"/>
                                </f:facet>
                            </p:column>
                        </p:dataTable>

                        <h:panelGroup id="metrologyTooltip" layout="block">
                            <p:tooltip for="normIndicators:metrology:m_Kt" position="bottom" showDelay="500">
                                <p:graphicImage name="inWork.gif" library="images"/>
                            </p:tooltip>
                            <p:tooltip for="normIndicators:metrology:m_Kp" position="bottom" showDelay="500">
                                <p:graphicImage name="inWork.gif" library="images"/>
                            </p:tooltip>
                            <p:tooltip for="normIndicators:metrology:m_KgKv" position="bottom" showDelay="500">
                                <p:graphicImage name="inWork.gif" library="images"/>
                            </p:tooltip>
                            <p:tooltip for="normIndicators:metrology:m_Kq" position="bottom" showDelay="500">
                                <p:graphicImage name="inWork.gif" library="images"/>
                            </p:tooltip>
                        </h:panelGroup>
                    </div>

                    <f:facet name="actions">
                        <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-success tc-no-loading tc-small"
                                       onclick="PF('statusDialog').show();" rendered="#{systemParamsUtil.write}"
                                       action="#{normIndicators.onSaveChanges('metrology')}"
                                       update="metrology metrologyTooltip growl"
                                       oncomplete="PF('statusDialog').hide();">
                            <h:outputText styleClass="ui-icon pi pi-save"/>
                        </p:commandLink>
                    </f:facet>
                </p:panel>
            </div>
            <div style="margin-bottom: 5px;">
                <p:panel styleClass="tc-panel blue-header" header="Показатели эффективности">
                    <div style="height: calc(100% - 6px); padding: 3px;">
                        <div style="display: flex; margin-bottom: 5px;">
                            <div style="flex: 1 1 0; margin-right: 5px;">
                                <p:panel styleClass="tc-panel" header="Тепловой ввод">
                                    <div style="height: calc(100% - 6px); padding: 3px;">
                                        <p:dataTable id="indicatorTVTable" value="#{normIndicators.indicatorTVList}" var="tv"
                                                     editable="#{systemParamsUtil.write}" editMode="cell"
                                                     emptyMessage="#{global['table.empty.value']}">

                                            <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                            <p:column headerText="Тип объекта" >
                                                <h:outputText value="Источник"/>
                                            </p:column>
                                            <p:column id="K" headerText="Подпитка нормированная Кп_н [%]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&lt;|#{tv.kpn}|%"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{tv.kpn}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            <p:column id="KzTv" headerText="Удельный расход Кз тв [тонн/Гкал]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&lt;#{tv.kz}"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{tv.kz}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            <p:column id="KpTv" headerText="Коэффициент подпитки Кп тв [%]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&lt;#{tv.kp}"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{tv.kp}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                        </p:dataTable>

                                        <h:panelGroup id="indicatorTVTableTooltip" layout="block">
                                            <p:tooltip for="normIndicators:indicatorTVTable:K" position="bottom" showDelay="500">
                                                <p:graphicImage name="tooltip/K.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                            <p:tooltip for="normIndicators:indicatorTVTable:KzTv" position="bottom" showDelay="500">
                                                <p:graphicImage name="tooltip/Kz tv.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                            <p:tooltip for="normIndicators:indicatorTVTable:KpTv" position="bottom" showDelay="500">
                                                <p:graphicImage name="tooltip/Kp tv.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                        </h:panelGroup>
                                    </div>
                                </p:panel>
                            </div>
                            <div style="flex: 1 1 0;">
                                <p:panel styleClass="tc-panel" header="Центральное отопление">
                                    <div style="height: calc(100% - 6px); padding: 3px;">
                                        <p:dataTable id="indicatorCOTable" value="#{normIndicators.indicatorCOList}" var="co"
                                                     editable="#{systemParamsUtil.write}" editMode="cell"
                                                     emptyMessage="#{global['table.empty.value']}">

                                            <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                            <p:column headerText="Тип объекта">
                                                <h:outputText value="#{co.name}"/>
                                            </p:column>
                                            <p:column id="KzCo" headerText="Удельный расход Кз цо [тонн/Гкал]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&lt;#{co.kz}"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{co.kz}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            <p:column id="KpCo" headerText="Коэффициент подпитки Кп цо [%]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&lt;#{co.kp}"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{co.kp}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                        </p:dataTable>

                                        <h:panelGroup id="indicatorCOTableTooltip" layout="block">
                                            <p:tooltip for="normIndicators:indicatorCOTable:KzCo" position="bottom" showDelay="500">
                                                <p:graphicImage name="tooltip/Kz co.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                            <p:tooltip for="normIndicators:indicatorCOTable:KpCo" position="left" showDelay="500">
                                                <p:graphicImage name="tooltip/Kp co.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                        </h:panelGroup>
                                    </div>
                                </p:panel>
                            </div>
                        </div>
                        <div style="display: flex;">
                            <div style="flex: 1 1 0; margin-right: 5px;">
                                <p:panel styleClass="tc-panel" header="Горячее водоснабжение">
                                    <div style="height: calc(100% - 6px); padding: 3px;">
                                        <p:dataTable id="indicatorGVSTable" value="#{normIndicators.indicatorGVSList}" var="gvs"
                                                     editable="#{systemParamsUtil.write}" editMode="cell"
                                                     emptyMessage="#{global['table.empty.value']}">

                                            <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                            <p:column headerText="Тип объекта" >
                                                <h:outputText value="#{gvs.name}"/>
                                            </p:column>
                                            <p:column id="KcGvs" headerText="Коэффициент циркуляции Кц [%]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&gt;#{gvs.kc}%"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{gvs.kc}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                        </p:dataTable>

                                        <h:panelGroup id="indicatorGVSTableTooltip" layout="block">
                                            <p:tooltip for="normIndicators:indicatorGVSTable:KcGvs" position="bottom" showDelay="500">
                                                <p:graphicImage name="tooltip/Kc gvs.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                        </h:panelGroup>
                                    </div>
                                </p:panel>
                            </div>
                            <div style="flex: 1 1 0;">
                                <p:panel styleClass="tc-panel" header="Вентиляция">
                                    <div style="height: calc(100% - 6px); padding: 3px;">
                                        <p:dataTable id="indicatorVENTTable" value="#{normIndicators.indicatorVENTList}" var="vent"
                                                     editable="#{systemParamsUtil.write}" editMode="cell"
                                                     emptyMessage="#{global['table.empty.value']}">

                                            <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                            <p:column headerText="Тип объекта">
                                                <h:outputText value="#{vent.name}"/>
                                            </p:column>
                                            <p:column id="KzVent" headerText="Удельный расход Кз в [тонн/Гкал]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&lt;#{vent.kz}"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{vent.kz}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            <p:column id="KpVent" headerText="Коэффициент подпитки Кп в [%]" style="text-align: center;">
                                                <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                    <f:facet name="output">
                                                        <h:outputText value="&lt;#{vent.kp}"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{vent.kp}" decimalPlaces="2"/>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                        </p:dataTable>

                                        <h:panelGroup id="indicatorVENTTableTooltip" layout="block">
                                            <p:tooltip for="normIndicators:indicatorVENTTable:KzVent" position="bottom" showDelay="500">
                                                <p:graphicImage name="tooltip/Kz vent.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                            <p:tooltip for="normIndicators:indicatorVENTTable:KpVent" position="left" showDelay="500">
                                                <p:graphicImage name="tooltip/Kp vent.jpg" library="normIndicators"/>
                                            </p:tooltip>
                                        </h:panelGroup>
                                    </div>
                                </p:panel>
                            </div>
                        </div>
                    </div>

                    <f:facet name="actions">
                        <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-success tc-no-loading tc-small"
                                       onclick="PF('statusDialog').show();" rendered="#{systemParamsUtil.write}"
                                       action="#{normIndicators.onSaveChanges('efficiency')}"
                                       update="indicatorTVTable indicatorTVTableTooltip indicatorCOTable indicatorCOTableTooltip indicatorGVSTable indicatorGVSTableTooltip indicatorVENTTable indicatorVENTTableTooltip growl"
                                       oncomplete="PF('statusDialog').hide();">
                            <h:outputText styleClass="ui-icon pi pi-save"/>
                        </p:commandLink>
                    </f:facet>
                </p:panel>
            </div>
            <div style="margin-bottom: 5px;">
                <p:panel styleClass="tc-panel blue-header" header="Граничные значения (распределительная сеть)">
                    <div style="height: calc(100% - 6px); padding: 3px;">
                        <div style="margin-bottom: 5px;">
                            <p:panel styleClass="tc-panel" header="Центральное отопление">
                                <div style="height: calc(100% - 6px); padding: 3px;">
                                    <p:dataTable id="borderValuesCO" value="#{normIndicators.indicatorBorderCoList}" var="borderValuesCO"
                                                 editable="#{systemParamsUtil.write}" editMode="cell"
                                                 emptyMessage="#{global['table.empty.value']}">

                                        <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                        <p:column id="Kdtco" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesCO.kdt}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesCO.kdt}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesCOHeaderName(0)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kdtoco" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesCO.kdto}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesCO.kdto}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesCOHeaderName(1)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kyco" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesCO.ky}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesCO.ky}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesCOHeaderName(2)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="KdQco" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesCO.kdq}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesCO.kdq}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesCOHeaderName(3)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kco" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesCO.k}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesCO.k}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesCOHeaderName(4)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="K1" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="≤#{borderValuesCO.k1}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesCO.k1}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesCOHeaderName(5)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="K2" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="≤#{borderValuesCO.k2}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesCO.k2}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesCOHeaderName(6)}"/>
                                            </f:facet>
                                        </p:column>
                                    </p:dataTable>

                                    <h:panelGroup id="borderValuesCOTooltip" layout="block">
                                        <p:tooltip for="normIndicators:borderValuesCO:Kdtco" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesCO:Kdtoco" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesCO:Kyco" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesCO:KdQco" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesCO:Kco" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesCO:K1" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesCO:K2" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                    </h:panelGroup>
                                </div>
                            </p:panel>
                        </div>
                        <div style="margin-bottom: 5px;">
                            <p:panel styleClass="tc-panel" header="Вентиляция">
                                <div style="height: calc(100% - 6px); padding: 3px;">
                                    <p:dataTable id="borderValuesVent" value="#{normIndicators.indicatorBorderVentList}" var="borderValuesVent"
                                                 editable="#{systemParamsUtil.write}" editMode="cell"
                                                 emptyMessage="#{global['table.empty.value']}">

                                        <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                        <p:column id="Kdtvent" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesVent.kdt}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesVent.kdt}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesVentHeaderName(0)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kdtovent" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesVent.kdto}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesVent.kdto}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesVentHeaderName(1)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kyvent" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesVent.ky}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesVent.ky}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesVentHeaderName(2)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="KdQvent" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesVent.kdg}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesVent.kdg}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesVentHeaderName(3)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column/>
                                        <p:column/>
                                        <p:column/>
                                    </p:dataTable>

                                    <h:panelGroup id="borderValuesVentTooltip" layout="block">
                                        <p:tooltip for="normIndicators:borderValuesVent:Kdtvent" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesVent:Kdtovent" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesVent:Kyvent" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesVent:KdQvent" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                    </h:panelGroup>
                                </div>
                            </p:panel>
                        </div>
                        <div>
                            <p:panel styleClass="tc-panel" header="Горячее водоснабжение">
                                <div style="height: calc(100% - 6px); padding: 3px;">
                                    <p:dataTable id="borderValuesGVS" value="#{normIndicators.indicatorBorderGvsList}" var="borderValuesGVS"
                                                 editable="#{systemParamsUtil.write}" editMode="cell"
                                                 emptyMessage="#{global['table.empty.value']}">

                                        <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                        <p:column id="Kdtgvs" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesGVS.kdt}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesGVS.kdt}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesGVSHeaderName(0)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kdtogvs" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesGVS.kdto}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesGVS.kdto}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesGVSHeaderName(1)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kygvs" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesGVS.ky}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesGVS.ky}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesGVSHeaderName(2)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="dtr" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesGVS.dt}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesGVS.dt}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesGVSHeaderName(3)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="dt7" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="≤#{borderValuesGVS.dt7}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesGVS.dt7}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesGVSHeaderName(4)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="t7" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesGVS.t7}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesGVS.t7}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesGVSHeaderName(5)}"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column id="Kgvs" style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{borderValuesGVS.kgvs}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{borderValuesGVS.kgvs}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>

                                            <f:facet name="header">
                                                <h:outputText escape="false" value="#{normIndicators.getBorderValuesGVSHeaderName(6)}"/>
                                            </f:facet>
                                        </p:column>
                                    </p:dataTable>

                                    <h:panelGroup id="borderValuesGVSTooltip" layout="block">
                                        <p:tooltip for="normIndicators:borderValuesGVS:Kdtgvs" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesGVS:Kdtogvs" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesGVS:Kygvs" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesGVS:dtr" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesGVS:dt7" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesGVS:t7" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:borderValuesGVS:Kgvs" position="bottom" showDelay="500">
                                            <p:graphicImage name="inWork.gif" library="images"/>
                                        </p:tooltip>
                                    </h:panelGroup>
                                </div>
                            </p:panel>
                        </div>
                    </div>

                    <f:facet name="actions">
                        <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-success tc-no-loading tc-small"
                                       onclick="PF('statusDialog').show();" rendered="#{systemParamsUtil.write}"
                                       action="#{normIndicators.onSaveChanges('borderValues')}"
                                       update="borderValuesCO borderValuesCOTooltip borderValuesVent borderValuesVentTooltip borderValuesGVS borderValuesGVSTooltip growl"
                                       oncomplete="PF('statusDialog').hide();">
                            <h:outputText styleClass="ui-icon pi pi-save"/>
                        </p:commandLink>
                    </f:facet>
                </p:panel>
            </div>
            <div>
                <p:panel styleClass="tc-panel blue-header" header="Анализ потребителей">
                    <div style="height: calc(100% - 6px); padding: 3px;">
                        <div style="margin-bottom: 5px;">
                            <p:panel styleClass="tc-panel" header="Центральное отопление">
                                <div style="height: calc(100% - 6px); padding: 3px;">
                                    <p:dataTable id="underSupplyValues" value="#{normIndicators.indicatorUnderSupplyList}" var="underSupply"
                                                 editable="#{systemParamsUtil.write}" editMode="cell"
                                                 emptyMessage="#{global['table.empty.value']}" style="height: 100%;" >

                                        <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column id="T3" colspan="3" headerText="По Т3"/>
                                                <p:column id="T4" colspan="3" headerText="По Т4"/>
                                            </p:row>
                                            <p:row>
                                                <p:column headerText="k1" />
                                                <p:column headerText="k2" />
                                                <p:column headerText="k3" />
                                                <p:column headerText="k1" />
                                                <p:column headerText="k2" />
                                                <p:column headerText="k3" />
                                            </p:row>
                                        </p:columnGroup>
                                        <p:column style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{underSupply.t3K1}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{underSupply.t3K1}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{underSupply.t3K2}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{underSupply.t3K2}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{underSupply.t3K3}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{underSupply.t3K3}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{underSupply.t4K1}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{underSupply.t4K1}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{underSupply.t4K2}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{underSupply.t4K2}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column style="text-align: center;">
                                            <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                <f:facet name="output">
                                                    <h:outputText value="#{underSupply.t4K3}"/>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputNumber value="#{underSupply.t4K3}" decimalPlaces="2"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                    </p:dataTable>

                                    <h:panelGroup id="underSupplyValuesTooltip" layout="block">
                                        <p:tooltip for="normIndicators:underSupplyValues:T3" position="bottom" showDelay="500">
                                            <p:graphicImage name="tooltip/T3UnderSupply.jpg" library="normIndicators"/>
                                        </p:tooltip>
                                        <p:tooltip for="normIndicators:underSupplyValues:T4" position="bottom" showDelay="500">
                                            <p:graphicImage name="tooltip/T4UnderSupply.jpg" library="normIndicators"/>
                                        </p:tooltip>
                                    </h:panelGroup>
                                </div>
                            </p:panel>
                        </div>
                        <div>
                            <p:panel styleClass="tc-panel" header="Горячее водоснабжение">
                                <div style="height: calc(100% - 6px); padding: 3px;">
                                    <div style="display: flex;">
                                        <div style="flex: 1 1 0; margin-right: 5px;">
                                            <p:dataTable id="consumerAnalisisT7Table" value="#{normIndicators.indicatorT7List}" var="t7"
                                                         editable="#{systemParamsUtil.write}" editMode="cell"
                                                         emptyMessage="#{global['table.empty.value']}">

                                                <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                                <p:columnGroup type="header">
                                                    <p:row>
                                                        <p:column colspan="5" headerText="Т7"/>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column headerText="Тип объекта" />
                                                        <p:column id="T7ming" headerText="T7min Ж" />
                                                        <p:column id="T7maxg" headerText="T7max Ж" />
                                                        <p:column id="T7minp" headerText="T7min П" />
                                                        <p:column id="T7maxp" headerText="T7max П" />
                                                    </p:row>
                                                </p:columnGroup>

                                                <p:column>
                                                    <h:outputText value="#{t7.name}"/>
                                                </p:column>
                                                <p:column style="text-align: center;">
                                                    <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                        <f:facet name="output">
                                                            <h:outputText value="#{t7.minG}"/>
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputNumber value="#{t7.minG}" decimalPlaces="2"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                                <p:column style="text-align: center;">
                                                    <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                        <f:facet name="output">
                                                            <h:outputText value="#{t7.maxG}"/>
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputNumber value="#{t7.maxG}" decimalPlaces="2"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                                <p:column style="text-align: center;">
                                                    <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                        <f:facet name="output">
                                                            <h:outputText value="#{t7.minP}"/>
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputNumber value="#{t7.minP}" decimalPlaces="2"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                                <p:column style="text-align: center;">
                                                    <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                        <f:facet name="output">
                                                            <h:outputText value="#{t7.maxP}"/>
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputNumber value="#{t7.maxP}" decimalPlaces="2"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                            </p:dataTable>

                                            <h:panelGroup id="consumerAnalisisT7TableTooltip" layout="block">
                                                <p:tooltip for="normIndicators:consumerAnalisisT7Table:T7ming" position="bottom" showDelay="500">
                                                    <p:graphicImage name="tooltip/T7min g.jpg" library="normIndicators"/>
                                                </p:tooltip>
                                                <p:tooltip for="normIndicators:consumerAnalisisT7Table:T7maxg" position="bottom" showDelay="500">
                                                    <p:graphicImage name="tooltip/T7max g.jpg" library="normIndicators"/>
                                                </p:tooltip>
                                                <p:tooltip for="normIndicators:consumerAnalisisT7Table:T7minp" position="bottom" showDelay="500">
                                                    <p:graphicImage name="tooltip/T7min p.jpg" library="normIndicators"/>
                                                </p:tooltip>
                                                <p:tooltip for="normIndicators:consumerAnalisisT7Table:T7maxp" position="bottom" showDelay="500">
                                                    <p:graphicImage name="tooltip/T7max p.jpg" library="normIndicators"/>
                                                </p:tooltip>
                                            </h:panelGroup>
                                        </div>
                                        <div style="flex: 1 1 0;">
                                            <p:dataTable id="consumerAnalisisDeltaT7Table" value="#{normIndicators.indicatorDT7List}" var="dT7"
                                                         editable="#{systemParamsUtil.write}" editMode="cell"
                                                         emptyMessage="#{global['table.empty.value']}">

                                                <p:ajax event="cellEdit" listener="#{normIndicators.onCellEdit}" />

                                                <p:columnGroup type="header">
                                                    <p:row>
                                                        <p:column colspan="3" headerText="ΔТ7"/>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column id="Tmin" headerText="ΔTmin" />
                                                        <p:column id="Tmax" headerText="ΔTmax" />
                                                        <p:column id="Tnorm" headerText="ΔTнорм" />
                                                    </p:row>
                                                </p:columnGroup>

                                                <p:column style="text-align: center;">
                                                    <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                        <f:facet name="output">
                                                            <h:outputText value="#{dT7.dtMin}"/>
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputNumber value="#{dT7.dtMin}" decimalPlaces="2"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                                <p:column style="text-align: center;">
                                                    <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                        <f:facet name="output">
                                                            <h:outputText value="#{dT7.dtMax}"/>
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputNumber value="#{dT7.dtMax}" decimalPlaces="2"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                                <p:column style="text-align: center;">
                                                    <p:cellEditor disabled="#{!systemParamsUtil.write}">
                                                        <f:facet name="output">
                                                            <h:outputText value="#{dT7.dtNorm}"/>
                                                        </f:facet>
                                                        <f:facet name="input">
                                                            <p:inputNumber value="#{dT7.dtNorm}" decimalPlaces="2"/>
                                                        </f:facet>
                                                    </p:cellEditor>
                                                </p:column>
                                            </p:dataTable>

                                            <h:panelGroup id="consumerAnalisisDeltaT7TableTooltip" layout="block">
                                                <p:tooltip for="normIndicators:consumerAnalisisDeltaT7Table:Tmin" position="bottom" showDelay="500">
                                                    <p:graphicImage name="tooltip/Tmin.png" library="normIndicators"/>
                                                </p:tooltip>
                                                <p:tooltip for="normIndicators:consumerAnalisisDeltaT7Table:Tmax" position="bottom" showDelay="500">
                                                    <p:graphicImage name="tooltip/Tmax.png" library="normIndicators"/>
                                                </p:tooltip>
                                                <p:tooltip for="normIndicators:consumerAnalisisDeltaT7Table:Tnorm" position="left" showDelay="500">
                                                    <p:graphicImage name="tooltip/Tnorm.png" library="normIndicators"/>
                                                </p:tooltip>
                                            </h:panelGroup>
                                        </div>
                                    </div>
                                </div>
                            </p:panel>
                        </div>
                    </div>

                    <f:facet name="actions">
                        <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default tc-success tc-no-loading tc-small"
                                       onclick="PF('statusDialog').show();" rendered="#{systemParamsUtil.write}"
                                       action="#{normIndicators.onSaveChanges('analysis')}"
                                       update="underSupplyValues underSupplyValuesTooltip consumerAnalisisT7Table consumerAnalisisT7TableTooltip consumerAnalisisDeltaT7Table consumerAnalisisDeltaT7TableTooltip growl"
                                       oncomplete="PF('statusDialog').hide();">
                            <h:outputText styleClass="ui-icon pi pi-save"/>
                        </p:commandLink>
                    </f:facet>
                </p:panel>
            </div>
        </p:panel>
    </h:form>
</ui:composition>
